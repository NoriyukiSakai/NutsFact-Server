<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nines.nutsfact.infrastructure.mapper.AllergenicIngredientMapper">

    <resultMap id="AllergenicIngredientResultMap" type="com.nines.nutsfact.domain.model.allergy.AllergenicIngredient">
        <id property="allergenicIngredientId" column="allergenic_ingredient_id"/>
        <result property="allergenicIngredientName" column="allergenic_ingredient_name"/>
        <result property="description" column="description"/>
        <result property="category" column="category"/>
    </resultMap>

    <select id="findAll" resultMap="AllergenicIngredientResultMap">
        SELECT allergenic_ingredient_id, allergenic_ingredient_name, description, category
        FROM MASTER_ALLERGENIC_INGREDIENTS
        ORDER BY allergenic_ingredient_id
    </select>

    <select id="findById" resultMap="AllergenicIngredientResultMap">
        SELECT allergenic_ingredient_id, allergenic_ingredient_name, description, category
        FROM MASTER_ALLERGENIC_INGREDIENTS
        WHERE allergenic_ingredient_id = #{allergenicIngredientId}
    </select>

    <insert id="insert" parameterType="com.nines.nutsfact.domain.model.allergy.AllergenicIngredient" useGeneratedKeys="true" keyProperty="allergenicIngredientId">
        INSERT INTO MASTER_ALLERGENIC_INGREDIENTS (allergenic_ingredient_name, description, category)
        VALUES (#{allergenicIngredientName}, #{description}, #{category})
    </insert>

    <update id="update" parameterType="com.nines.nutsfact.domain.model.allergy.AllergenicIngredient">
        UPDATE MASTER_ALLERGENIC_INGREDIENTS
        SET allergenic_ingredient_name = #{allergenicIngredientName},
            description = #{description},
            category = #{category}
        WHERE allergenic_ingredient_id = #{allergenicIngredientId}
    </update>

    <delete id="delete">
        DELETE FROM MASTER_ALLERGENIC_INGREDIENTS WHERE allergenic_ingredient_id = #{allergenicIngredientId}
    </delete>

</mapper>
